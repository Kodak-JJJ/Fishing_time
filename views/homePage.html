<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Map with clickable pins</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <style>
    /* Give the map a height or it won't appear */
    #map { height: 520px; border-radius: 8px; }
    body { font-family: system-ui, sans-serif; margin: 16px; }
  </style>
</head>
<body>
  <h1>Fishing spots</h1>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // 1) Initialize map (centered roughly on Metro Vancouver)
    const map = L.map('map').setView([49.2827, -123.1207], 11);

    // 2) Base tile layer (OpenStreetMap)
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // 3) Your locations (add your own lat/lng + URLs)
    const places = [
      { name: 'Ambleside',  lat: 49.3275, lng: -123.1570, url: '/places/ambleside' },
      { name: 'Steveston',  lat: 49.1250, lng: -123.1830, url: '/places/steveston' },
      // { name: 'Another spot', lat: ..., lng: ..., url: 'https://example.com/page' },
    ];

    // Optional: custom pin icon (use your own image if you like)
    // const icon = L.icon({
    //   iconUrl: '/img/pin.png',
    //   iconSize: [26, 38],
    //   iconAnchor: [13, 38],
    //   popupAnchor: [0, -34]
    // });

    // 4) Add markers and click behavior
    const group = L.featureGroup().addTo(map);

    places.forEach(p => {
      const marker = L.marker([p.lat, p.lng], {
        title: p.name,
        // icon
      }).addTo(group);

      // A) direct navigation on click:
      marker.on('click', () => {
        // open in same tab:
        window.location.href = p.url;
        // or open in new tab:
        // window.open(p.url, '_blank', 'noopener');
      });

      // B) (optional) also show a popup with a link:
      marker.bindPopup(`<strong>${p.name}</strong><br>
        <a href="${p.url}">Open page</a>`);
      // C) (optional) quick hover label
      marker.bindTooltip(p.name);
    });

    // 5) Fit map to all markers
    map.fitBounds(group.getBounds(), { padding: [40, 40] });
  </script>
</body>
</html>
